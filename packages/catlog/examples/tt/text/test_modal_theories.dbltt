set_theory ThMulticategory

type SigMonoid := [
  M : Object,
  op : Multihom[[M, M], M],
  unit : Multihom[[], M]
]

generate SigMonoid

type SigRig := [
  R : Object,
  Add : SigMonoid & [ .M := R ],
  Mul : SigMonoid & [ .M := R ]
]

generate SigRig

set_theory ThSymMonoidalCategory

type SIR := [
  S : Object,
  I : Object,
  R : Object,
  infect : (Hom Object)[@tensor [S, I], @tensor [I, I]],
  recover : (Hom Object)[I, R]
]

generate SIR

type SIRV := [
  Unvax : SIR,
  V : Object,
  vaccinate : (Hom Object)[Unvax.S, V]
]

generate SIRV

#(should_fail)
type BadOpApp := [
   X : Object,
   f : (Hom Object)[@tensor X, X],
]
