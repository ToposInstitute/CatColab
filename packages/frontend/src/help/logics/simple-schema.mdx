import { A } from "@solidjs/router";
import { Warning, Note } from "../../components/alert";
import { HelpAnalysisById } from "../logic_help_detail"

## Description

A categorical **database schema**, or **schema** for short, is a representation of the *structure*, or *shape*, of a database.
Once the shape has been defined, an instance of the model will be an actual database of that shape.

Schemas are expressed in a diagrammatic language, with boxes and arrows.
There are two kinds of boxes:

- **Entities**
- **Attribute types**

and three kinds of arrows (each of them possibly many-to-one):

- **Mappings** from entities to entities
- **Attributes**, from entities to attribute types
- **Operations**, from attribute types to attribute types.

What this data actually "means" can be explained in terms of what it corresponds to in an *instance* of the schema (see below, under *Instances and analyses*).

<Note>
CatColab currently only supports **single-input** operations, so many familiar examples (such as sums and averages) are not directly representable.

Note that consistency constraints on the schema are also not yet supported, though they can be added informally in rich text cells.
</Note>


### Further reading

- Evan Patterson, Owen Lynch, James Fairbanks, "Categorical Data Structures for Technical Computing", *Compositionality* **4** (2022). [arXiv:2202.12345](https://arxiv.org/abs/2202.12345) [DOI:10.32408/compositionality-4-5](
https://doi.org/10.32408/compositionality-4-5)
- Brendan Fong, David I. Spivak, "Databases: Categories, Functors, and Universal Constructions" in *An Invitation to Applied Category Theory* (2019). [arXiv:1803.05316](https://arxiv.org/abs/1803.05316) [DOI:10.1017/9781108668804](
    https://doi.org/10.1017/9781108668804)
- Wikipedia: [Database Schema](https://en.wikipedia.org/wiki/Database_schema)


## Instances and analyses

### Instances

Graphical instances of schemas are called **acsets** in applied category theory lingo, but can also be thought of as being precisely *databases*.

<table>
  <thead>
    <tr>
      <th>Schema (database shape)</th>
      <th>Instance (database)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>entity</td>
      <td>table</td>
    </tr>
    <tr>
      <td>mapping</td>
      <td>foreign key</td>
    </tr>
    <tr>
      <td>attributes</td>
      <td>columns</td>
    </tr>
    <tr>
      <td>attribute type</td>
      <td>attribute column constraints</td>
    </tr>
    <tr>
      <td>operation</td>
      <td>data operations</td>
    </tr>
  </tbody>
</table>

<Warning>
The implementation of schema instances currently in CatColab are not quite acsets, since typing maps (that define the specific sets in which attribute types can have values) are not supported.
In other words, the set corresponding to an attribute type starts as empty and new elements are added to it whenever a new attribute variable is given.
</Warning>


### Analyses

<HelpAnalysisById theory={props.theory} analysisId="diagram"/>
